{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///F:/NNBlog/my-app/app/user/layout.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { usePathname, useRouter } from \"next/navigation\";\r\nimport {\r\n  FileText,\r\n  PlusCircle,\r\n  User as UserIcon,\r\n  Menu,\r\n  X,\r\n  LogOut,\r\n} from \"lucide-react\";\r\n\r\nexport default function UserLayout({ children }) {\r\n  const [sidebarOpen, setSidebarOpen] = useState(true);\r\n  const [user, setUser] = useState(null);\r\n  const pathname = usePathname();\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    checkAuth();\r\n  }, []);\r\n\r\n  const checkAuth = async () => {\r\n    try {\r\n      const response = await fetch(\"/api/auth/me\");\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setUser(data.user);\r\n        // If user is ADMIN, redirect to admin panel (only ADMIN goes to admin panel)\r\n        if (data.user?.role === \"ADMIN\") {\r\n          router.push(\"/admin\");\r\n        }\r\n        // All other users (NORMAL_USER, etc.) stay in user panel\r\n      } else {\r\n        router.push(\"/login\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Auth check failed:\", error);\r\n      router.push(\"/login\");\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await fetch(\"/api/logout\", { method: \"POST\" });\r\n      router.push(\"/\");\r\n      router.refresh();\r\n    } catch (error) {\r\n      console.error(\"Logout failed:\", error);\r\n    }\r\n  };\r\n\r\n  const menuItems = [\r\n    {\r\n      name: \"My Posts\",\r\n      href: \"/user\",\r\n      icon: FileText,\r\n    },\r\n    {\r\n      name: \"Create Post\",\r\n      href: \"/user/create-post\",\r\n      icon: PlusCircle,\r\n    },\r\n    {\r\n      name: \"Profile\",\r\n      href: \"/user/profile\",\r\n      icon: UserIcon,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50\">\r\n      {/* Sidebar */}\r\n      <aside\r\n        className={`fixed left-0 top-0 h-full bg-gradient-to-b from-blue-900 via-blue-800 to-blue-900 text-white transition-all duration-300 z-40 shadow-2xl ${\r\n          sidebarOpen ? \"w-72\" : \"w-0\"\r\n        } overflow-hidden`}\r\n      >\r\n        <div className=\"h-full flex flex-col\">\r\n          {/* Logo/Brand */}\r\n          <div className=\"p-6 border-b border-blue-700/50\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <h1 className=\"text-2xl font-bold bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent\">\r\n                  User Panel\r\n                </h1>\r\n                <p className=\"text-xs text-blue-300 mt-1\">Content Management</p>\r\n              </div>\r\n              <button\r\n                onClick={() => setSidebarOpen(false)}\r\n                className=\"md:hidden text-blue-300 hover:text-white transition\"\r\n              >\r\n                <X size={24} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Navigation */}\r\n          <nav className=\"flex-1 p-4 space-y-1 overflow-y-auto\">\r\n            {menuItems.map((item) => {\r\n              const Icon = item.icon;\r\n              const isActive = pathname === item.href;\r\n              return (\r\n                <Link\r\n                  key={item.href}\r\n                  href={item.href}\r\n                  className={`group flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${\r\n                    isActive\r\n                      ? \"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/30\"\r\n                      : \"text-blue-200 hover:bg-blue-700/50 hover:text-white\"\r\n                  }`}\r\n                >\r\n                  <Icon\r\n                    size={20}\r\n                    className={isActive ? \"text-white\" : \"text-blue-300 group-hover:text-white\"}\r\n                  />\r\n                  <span className=\"font-medium\">{item.name}</span>\r\n                  {isActive && (\r\n                    <div className=\"ml-auto w-1.5 h-1.5 rounded-full bg-white\"></div>\r\n                  )}\r\n                </Link>\r\n              );\r\n            })}\r\n          </nav>\r\n\r\n          {/* Footer */}\r\n          <div className=\"p-4 border-t border-blue-700/50\">\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n              <div className=\"text-xs text-blue-300\">\r\n                {user?.name || \"User\"}\r\n              </div>\r\n              <button\r\n                onClick={handleLogout}\r\n                className=\"flex items-center gap-2 px-3 py-2 text-xs text-blue-200 hover:text-white hover:bg-blue-700/50 rounded-lg transition\"\r\n              >\r\n                <LogOut size={14} />\r\n                Logout\r\n              </button>\r\n            </div>\r\n            <div className=\"text-xs text-blue-400 text-center\">\r\n              Â© 2024 Maharashtra Startup Organisation\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </aside>\r\n\r\n      {/* Mobile Sidebar Overlay */}\r\n      {sidebarOpen && (\r\n        <div\r\n          className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden\"\r\n          onClick={() => setSidebarOpen(false)}\r\n        />\r\n      )}\r\n\r\n      {/* Main Content */}\r\n      <div className={`transition-all duration-300 ${sidebarOpen ? \"md:ml-72\" : \"md:ml-0\"}`}>\r\n        {/* Top Bar */}\r\n        <header className=\"bg-white/80 backdrop-blur-lg border-b border-gray-200/50 sticky top-0 z-20 shadow-sm\">\r\n          <div className=\"px-6 py-4 flex items-center justify-between\">\r\n            <button\r\n              onClick={() => setSidebarOpen(!sidebarOpen)}\r\n              className=\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition\"\r\n            >\r\n              <Menu size={20} />\r\n            </button>\r\n            <div className=\"flex items-center gap-4\">\r\n              <Link\r\n                href=\"/\"\r\n                className=\"px-4 py-2 text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition\"\r\n              >\r\n                View Site\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        {/* Page Content */}\r\n        <main className=\"p-6 max-w-7xl mx-auto\">{children}</main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}}]
}