{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///F:/NNBlog/my-app/app/user/page.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport Link from \"next/link\";\r\nimport Image from \"next/image\";\r\nimport { Edit, Trash2, Eye, PlusCircle } from \"lucide-react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function UserPosts() {\r\n  const [posts, setPosts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    fetchUserPosts();\r\n  }, []);\r\n\r\n  const fetchUserPosts = async () => {\r\n    try {\r\n      // Fetch posts by current user (the API automatically filters by authenticated user)\r\n      const postsResponse = await fetch(\"/api/posts\");\r\n      if (postsResponse.ok) {\r\n        const postsData = await postsResponse.json();\r\n        setPosts(postsData.posts || []);\r\n      } else {\r\n        // If not authenticated, redirect to login\r\n        const errorData = await postsResponse.json();\r\n        if (postsResponse.status === 401 || postsResponse.status === 403) {\r\n          router.push(\"/login\");\r\n          return;\r\n        }\r\n        console.error(\"Failed to fetch posts:\", errorData.error);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching posts:\", error);\r\n      // If it's an auth error, redirect to login\r\n      if (error.message?.includes(\"401\") || error.message?.includes(\"403\")) {\r\n        router.push(\"/login\");\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <div className=\"text-gray-500\">Loading...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-gray-900\">My Posts</h1>\r\n          <p className=\"text-sm text-gray-500 mt-1\">Manage your blog posts</p>\r\n        </div>\r\n        <Link\r\n          href=\"/user/create-post\"\r\n          className=\"inline-flex items-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-3 rounded-xl hover:from-blue-600 hover:to-blue-700 shadow-lg shadow-blue-500/25 hover:shadow-xl hover:shadow-blue-500/30 transition-all duration-200 font-medium\"\r\n        >\r\n          <PlusCircle size={20} />\r\n          Create New Post\r\n        </Link>\r\n      </div>\r\n\r\n      {/* Stats Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n        <div className=\"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-6 text-white shadow-lg shadow-blue-500/25\">\r\n          <div className=\"text-sm font-medium opacity-90\">Total Posts</div>\r\n          <div className=\"text-3xl font-bold mt-2\">{posts.length}</div>\r\n        </div>\r\n        <div className=\"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-6 text-white shadow-lg shadow-green-500/25\">\r\n          <div className=\"text-sm font-medium opacity-90\">Published</div>\r\n          <div className=\"text-3xl font-bold mt-2\">\r\n            {posts.filter((p) => p.status === \"published\").length}\r\n          </div>\r\n        </div>\r\n        <div className=\"bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-2xl p-6 text-white shadow-lg shadow-yellow-500/25\">\r\n          <div className=\"text-sm font-medium opacity-90\">Drafts</div>\r\n          <div className=\"text-3xl font-bold mt-2\">\r\n            {posts.filter((p) => p.status === \"draft\").length}\r\n          </div>\r\n        </div>\r\n        <div className=\"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-6 text-white shadow-lg shadow-purple-500/25\">\r\n          <div className=\"text-sm font-medium opacity-90\">Categories</div>\r\n          <div className=\"text-3xl font-bold mt-2\">\r\n            {new Set(posts.map((p) => p.category)).size}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Posts List */}\r\n      {posts.length === 0 ? (\r\n        <div className=\"bg-white rounded-2xl shadow-xl border border-gray-100 p-12 text-center\">\r\n          <p className=\"text-gray-500 mb-4\">You haven't created any posts yet.</p>\r\n          <Link\r\n            href=\"/user/create-post\"\r\n            className=\"inline-flex items-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-3 rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all duration-200 font-medium\"\r\n          >\r\n            <PlusCircle size={20} />\r\n            Create Your First Post\r\n          </Link>\r\n        </div>\r\n      ) : (\r\n        <div className=\"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden\">\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full\">\r\n              <thead className=\"bg-gradient-to-r from-gray-50 to-gray-100/50\">\r\n                <tr>\r\n                  <th className=\"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider\">\r\n                    Title\r\n                  </th>\r\n                  <th className=\"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider\">\r\n                    Category\r\n                  </th>\r\n                  <th className=\"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider\">\r\n                    Date\r\n                  </th>\r\n                  <th className=\"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider\">\r\n                    Status\r\n                  </th>\r\n                  <th className=\"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider\">\r\n                    Actions\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"divide-y divide-gray-100\">\r\n                {posts.map((post) => (\r\n                  <tr\r\n                    key={post._id}\r\n                    className=\"hover:bg-gradient-to-r hover:from-gray-50 hover:to-white transition-colors\"\r\n                  >\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"text-sm font-semibold text-gray-900 max-w-md\">\r\n                        {post.title}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\r\n                        {post.category}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <span className=\"text-sm text-gray-600\">\r\n                        {new Date(post.createdAt).toLocaleDateString()}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <span\r\n                        className={`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${\r\n                          post.status === \"published\"\r\n                            ? \"bg-green-100 text-green-800\"\r\n                            : \"bg-yellow-100 text-yellow-800\"\r\n                        }`}\r\n                      >\r\n                        {post.status}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <Link\r\n                          href={`/post/${post.slug}`}\r\n                          className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition\"\r\n                          title=\"View\"\r\n                        >\r\n                          <Eye size={18} />\r\n                        </Link>\r\n                        <button\r\n                          className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg transition\"\r\n                          title=\"Edit\"\r\n                        >\r\n                          <Edit size={18} />\r\n                        </button>\r\n                        <button\r\n                          className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition\"\r\n                          title=\"Delete\"\r\n                        >\r\n                          <Trash2 size={18} />\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AANA;;;;;;;AAQe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC,EAAE;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,MAAM,iBAAiB;QACrB,IAAI;YACF,oFAAoF;YACpF,MAAM,gBAAgB,MAAM,MAAM;YAClC,IAAI,cAAc,EAAE,EAAE;gBACpB,MAAM,YAAY,MAAM,cAAc,IAAI;gBAC1C,SAAS,UAAU,KAAK,IAAI,EAAE;YAChC,OAAO;gBACL,0CAA0C;gBAC1C,MAAM,YAAY,MAAM,cAAc,IAAI;gBAC1C,IAAI,cAAc,MAAM,KAAK,OAAO,cAAc,MAAM,KAAK,KAAK;oBAChE,OAAO,IAAI,CAAC;oBACZ;gBACF;gBACA,QAAQ,KAAK,CAAC,0BAA0B,UAAU,KAAK;YACzD;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,yBAAyB;YACvC,2CAA2C;YAC3C,IAAI,MAAM,OAAO,EAAE,SAAS,UAAU,MAAM,OAAO,EAAE,SAAS,QAAQ;gBACpE,OAAO,IAAI,CAAC;YACd;QACF,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;0BAAgB;;;;;;;;;;;IAGrC;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;;0CACC,8OAAC;gCAAG,WAAU;0CAAmC;;;;;;0CACjD,8OAAC;gCAAE,WAAU;0CAA6B;;;;;;;;;;;;kCAE5C,8OAAC,uKAAI;wBACH,MAAK;wBACL,WAAU;;0CAEV,8OAAC,gOAAU;gCAAC,MAAM;;;;;;4BAAM;;;;;;;;;;;;;0BAM5B,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CAAiC;;;;;;0CAChD,8OAAC;gCAAI,WAAU;0CAA2B,MAAM,MAAM;;;;;;;;;;;;kCAExD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CAAiC;;;;;;0CAChD,8OAAC;gCAAI,WAAU;0CACZ,MAAM,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,aAAa,MAAM;;;;;;;;;;;;kCAGzD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CAAiC;;;;;;0CAChD,8OAAC;gCAAI,WAAU;0CACZ,MAAM,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,SAAS,MAAM;;;;;;;;;;;;kCAGrD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CAAiC;;;;;;0CAChD,8OAAC;gCAAI,WAAU;0CACZ,IAAI,IAAI,MAAM,GAAG,CAAC,CAAC,IAAM,EAAE,QAAQ,GAAG,IAAI;;;;;;;;;;;;;;;;;;YAMhD,MAAM,MAAM,KAAK,kBAChB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAE,WAAU;kCAAqB;;;;;;kCAClC,8OAAC,uKAAI;wBACH,MAAK;wBACL,WAAU;;0CAEV,8OAAC,gOAAU;gCAAC,MAAM;;;;;;4BAAM;;;;;;;;;;;;qCAK5B,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAM,WAAU;;0CACf,8OAAC;gCAAM,WAAU;0CACf,cAAA,8OAAC;;sDACC,8OAAC;4CAAG,WAAU;sDAA+E;;;;;;sDAG7F,8OAAC;4CAAG,WAAU;sDAA+E;;;;;;sDAG7F,8OAAC;4CAAG,WAAU;sDAA+E;;;;;;sDAG7F,8OAAC;4CAAG,WAAU;sDAA+E;;;;;;sDAG7F,8OAAC;4CAAG,WAAU;sDAA+E;;;;;;;;;;;;;;;;;0CAKjG,8OAAC;gCAAM,WAAU;0CACd,MAAM,GAAG,CAAC,CAAC,qBACV,8OAAC;wCAEC,WAAU;;0DAEV,8OAAC;gDAAG,WAAU;0DACZ,cAAA,8OAAC;oDAAI,WAAU;8DACZ,KAAK,KAAK;;;;;;;;;;;0DAGf,8OAAC;gDAAG,WAAU;0DACZ,cAAA,8OAAC;oDAAK,WAAU;8DACb,KAAK,QAAQ;;;;;;;;;;;0DAGlB,8OAAC;gDAAG,WAAU;0DACZ,cAAA,8OAAC;oDAAK,WAAU;8DACb,IAAI,KAAK,KAAK,SAAS,EAAE,kBAAkB;;;;;;;;;;;0DAGhD,8OAAC;gDAAG,WAAU;0DACZ,cAAA,8OAAC;oDACC,WAAW,CAAC,sEAAsE,EAChF,KAAK,MAAM,KAAK,cACZ,gCACA,iCACJ;8DAED,KAAK,MAAM;;;;;;;;;;;0DAGhB,8OAAC;gDAAG,WAAU;0DACZ,cAAA,8OAAC;oDAAI,WAAU;;sEACb,8OAAC,uKAAI;4DACH,MAAM,CAAC,MAAM,EAAE,KAAK,IAAI,EAAE;4DAC1B,WAAU;4DACV,OAAM;sEAEN,cAAA,8OAAC,uMAAG;gEAAC,MAAM;;;;;;;;;;;sEAEb,8OAAC;4DACC,WAAU;4DACV,OAAM;sEAEN,cAAA,8OAAC,mNAAI;gEAAC,MAAM;;;;;;;;;;;sEAEd,8OAAC;4DACC,WAAU;4DACV,OAAM;sEAEN,cAAA,8OAAC,oNAAM;gEAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;uCAhDf,KAAK,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DjC"}}]
}