{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///F:/NNBlog/my-app/components/RichTextEditor.jsx"],"sourcesContent":["\"use client\";\n\nimport { useRef, useState, useEffect } from \"react\";\nimport { \n  Bold, \n  Italic, \n  Underline, \n  Heading1, \n  Heading2, \n  Heading3, \n  Heading4,\n  Heading5,\n  Heading6,\n  List, \n  Upload,\n  Link as LinkIcon,\n  Strikethrough,\n  AlignLeft,\n  AlignCenter,\n  AlignRight,\n  AlignJustify,\n  Code,\n  Quote,\n  Palette,\n  Type\n} from \"lucide-react\";\n\nexport default function RichTextEditor({ value, onChange, placeholder = \"Start writing your post...\" }) {\n  const editorRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const toolbarRef = useRef(null);\n  const containerRef = useRef(null);\n  const [isBold, setIsBold] = useState(false);\n  const [isItalic, setIsItalic] = useState(false);\n  const [isUnderline, setIsUnderline] = useState(false);\n  const [isStrikethrough, setIsStrikethrough] = useState(false);\n  const [showColorPicker, setShowColorPicker] = useState(false);\n  const [showFontSizeMenu, setShowFontSizeMenu] = useState(false);\n  useEffect(() => {\n    if (editorRef.current && value !== editorRef.current.innerHTML) {\n      editorRef.current.innerHTML = value || \"\";\n    }\n  }, [value]);\n\n  // Set container max height based on viewport\n  useEffect(() => {\n    const updateContainerHeight = () => {\n      if (containerRef.current) {\n        // Find navbar/header element\n        const navbar = document.querySelector('nav, header, [role=\"navigation\"]');\n        const headerHeight = navbar ? navbar.offsetHeight : 0;\n        \n        // Calculate available height: viewport - header - page padding (200px for margins/padding)\n        const availableHeight = window.innerHeight - headerHeight - 200;\n        containerRef.current.style.maxHeight = `${Math.max(500, availableHeight)}px`;\n      }\n    };\n\n    // Initial calculation\n    updateContainerHeight();\n    \n    // Update on resize\n    window.addEventListener('resize', updateContainerHeight);\n    \n    // Also update after a short delay to account for dynamic header loading\n    const timeoutId = setTimeout(updateContainerHeight, 100);\n    \n    return () => {\n      window.removeEventListener('resize', updateContainerHeight);\n      clearTimeout(timeoutId);\n    };\n  }, []);\n\n  const updateFormattingState = () => {\n    if (!editorRef.current) return;\n    const selection = window.getSelection();\n    // Only update if selection is within editor\n    if (selection.rangeCount > 0 && editorRef.current.contains(selection.anchorNode)) {\n      setIsBold(document.queryCommandState(\"bold\"));\n      setIsItalic(document.queryCommandState(\"italic\"));\n      setIsUnderline(document.queryCommandState(\"underline\"));\n      setIsStrikethrough(document.queryCommandState(\"strikeThrough\"));\n    } else {\n      // Reset states when selection is outside editor\n      setIsBold(false);\n      setIsItalic(false);\n      setIsUnderline(false);\n      setIsStrikethrough(false);\n    }\n  };\n\n  const handleInput = () => {\n    if (editorRef.current) {\n      const html = editorRef.current.innerHTML;\n      onChange(html);\n      updateFormattingState();\n    }\n  };\n\n  const handleSelectionChange = () => {\n    updateFormattingState();\n  };\n\n  useEffect(() => {\n    document.addEventListener(\"selectionchange\", handleSelectionChange);\n    // Close dropdowns when clicking outside\n    const handleClickOutside = (e) => {\n      if (showColorPicker && !e.target.closest('.color-picker-container')) {\n        setShowColorPicker(false);\n      }\n      if (showFontSizeMenu && !e.target.closest('.font-size-container')) {\n        setShowFontSizeMenu(false);\n      }\n    };\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"selectionchange\", handleSelectionChange);\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [showColorPicker, showFontSizeMenu]);\n\n\n  const execCommand = (command, value = null) => {\n    if (!editorRef.current) return;\n    \n    // Ensure editor is focused\n    editorRef.current.focus();\n    \n    // Get current selection\n    const selection = window.getSelection();\n    let range = null;\n    \n    // Ensure we have a valid selection\n    if (selection.rangeCount === 0) {\n      // No selection, create one at cursor position\n      range = document.createRange();\n      if (editorRef.current.childNodes.length > 0) {\n        range.setStart(editorRef.current, editorRef.current.childNodes.length);\n        range.collapse(true);\n      } else {\n        range.selectNodeContents(editorRef.current);\n        range.collapse(false);\n      }\n      selection.removeAllRanges();\n      selection.addRange(range);\n    } else {\n      range = selection.getRangeAt(0);\n      // Ensure range is within editor\n      if (!editorRef.current.contains(range.commonAncestorContainer)) {\n        range = document.createRange();\n        range.selectNodeContents(editorRef.current);\n        range.collapse(false);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n    }\n    \n    try {\n      const success = document.execCommand(command, false, value);\n      if (!success && command === \"formatBlock\") {\n        // Fallback for formatBlock\n        const currentSelection = window.getSelection();\n        if (currentSelection.rangeCount > 0) {\n          const currentRange = currentSelection.getRangeAt(0);\n          const selectedText = currentRange.toString();\n          \n          if (selectedText) {\n            // Wrap selected text\n            const newElement = document.createElement(value);\n            newElement.textContent = selectedText;\n            currentRange.deleteContents();\n            currentRange.insertNode(newElement);\n            currentSelection.removeAllRanges();\n            const newRange = document.createRange();\n            newRange.selectNodeContents(newElement);\n            newRange.collapse(false);\n            currentSelection.addRange(newRange);\n          } else {\n            // No selection, find current block element\n            let blockElement = currentRange.commonAncestorContainer;\n            if (blockElement.nodeType === 3) {\n              blockElement = blockElement.parentElement;\n            }\n            // Find the nearest block-level element\n            while (blockElement && blockElement !== editorRef.current && \n                   !['H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'P', 'DIV', 'BLOCKQUOTE', 'PRE'].includes(blockElement.tagName)) {\n              blockElement = blockElement.parentElement;\n            }\n            if (blockElement && blockElement !== editorRef.current) {\n              const newElement = document.createElement(value);\n              newElement.innerHTML = blockElement.innerHTML;\n              blockElement.parentNode.replaceChild(newElement, blockElement);\n              // Set cursor at end\n              const newRange = document.createRange();\n              newRange.selectNodeContents(newElement);\n              newRange.collapse(false);\n              currentSelection.removeAllRanges();\n              currentSelection.addRange(newRange);\n            } else {\n              // Create new element at cursor\n              const newElement = document.createElement(value);\n              newElement.innerHTML = '<br>';\n              currentRange.insertNode(newElement);\n              const newRange = document.createRange();\n              newRange.setStart(newElement, 0);\n              newRange.collapse(true);\n              currentSelection.removeAllRanges();\n              currentSelection.addRange(newRange);\n            }\n          }\n        }\n      }\n    } catch (e) {\n      console.error(\"Command execution failed:\", e);\n    }\n    \n    handleInput();\n    updateFormattingState();\n  };\n\n  const insertHeading = (level) => {\n    if (!editorRef.current) return;\n    editorRef.current.focus();\n    \n    const selection = window.getSelection();\n    const headingTag = `h${level}`;\n    \n    // Ensure we have a valid selection\n    if (selection.rangeCount === 0) {\n      // Create selection at cursor\n      const range = document.createRange();\n      range.selectNodeContents(editorRef.current);\n      range.collapse(false);\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n    \n    const range = selection.getRangeAt(0);\n    \n    // Ensure range is within editor\n    if (!editorRef.current.contains(range.commonAncestorContainer)) {\n      const newRange = document.createRange();\n      newRange.selectNodeContents(editorRef.current);\n      newRange.collapse(false);\n      selection.removeAllRanges();\n      selection.addRange(newRange);\n      return;\n    }\n    \n    const selectedText = range.toString();\n    \n    try {\n      // Find the current block element (paragraph, div, or existing heading)\n      let blockElement = range.commonAncestorContainer;\n      if (blockElement.nodeType === 3) { // Text node\n        blockElement = blockElement.parentElement;\n      }\n      \n      // Walk up to find block-level element\n      while (blockElement && blockElement !== editorRef.current) {\n        const tagName = blockElement.tagName;\n        if (['H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'P', 'DIV', 'BLOCKQUOTE', 'PRE', 'LI'].includes(tagName)) {\n          break;\n        }\n        blockElement = blockElement.parentElement;\n      }\n      \n      if (selectedText) {\n        // Text is selected - wrap it in heading\n        const heading = document.createElement(headingTag);\n        heading.textContent = selectedText;\n        range.deleteContents();\n        range.insertNode(heading);\n        \n        // Place cursor after heading\n        const newRange = document.createRange();\n        newRange.setStartAfter(heading);\n        newRange.collapse(true);\n        selection.removeAllRanges();\n        selection.addRange(newRange);\n        handleInput();\n      } else if (blockElement && blockElement !== editorRef.current && \n                 ['H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'P', 'DIV'].includes(blockElement.tagName)) {\n        // Replace current block with heading\n        const heading = document.createElement(headingTag);\n        \n        // Preserve content but clean it up\n        let content = blockElement.innerHTML;\n        if (!content || content.trim() === '' || content === '<br>') {\n          content = '<br>';\n        }\n        heading.innerHTML = content;\n        \n        // Replace the block element\n        if (blockElement.parentNode) {\n          blockElement.parentNode.replaceChild(heading, blockElement);\n        } else {\n          editorRef.current.replaceChild(heading, blockElement);\n        }\n        \n        // Set cursor in heading\n        const newRange = document.createRange();\n        if (heading.firstChild && heading.firstChild.nodeType === 3) {\n          newRange.setStart(heading.firstChild, heading.firstChild.textContent.length);\n        } else {\n          newRange.selectNodeContents(heading);\n          newRange.collapse(false);\n        }\n        selection.removeAllRanges();\n        selection.addRange(newRange);\n        handleInput();\n      } else {\n        // No block found or at root - try formatBlock command first\n        const success = document.execCommand(\"formatBlock\", false, headingTag);\n        \n        if (!success) {\n          // Fallback: create new heading element\n          const heading = document.createElement(headingTag);\n          heading.innerHTML = '<br>';\n          \n          // Insert at cursor position\n          if (range.startContainer === editorRef.current || range.startContainer.parentElement === editorRef.current) {\n            range.insertNode(heading);\n          } else {\n            editorRef.current.appendChild(heading);\n          }\n          \n          // Set cursor in heading\n          const newRange = document.createRange();\n          newRange.setStart(heading, 0);\n          newRange.collapse(true);\n          selection.removeAllRanges();\n          selection.addRange(newRange);\n        }\n        handleInput();\n      }\n    } catch (e) {\n      console.error(\"Heading insertion failed:\", e);\n      // Ultimate fallback\n      try {\n        const heading = document.createElement(headingTag);\n        if (selectedText) {\n          heading.textContent = selectedText;\n          range.deleteContents();\n          range.insertNode(heading);\n        } else {\n          heading.innerHTML = '<br>';\n          range.insertNode(heading);\n        }\n        const newRange = document.createRange();\n        newRange.selectNodeContents(heading);\n        newRange.collapse(false);\n        selection.removeAllRanges();\n        selection.addRange(newRange);\n        handleInput();\n      } catch (e2) {\n        console.error(\"Fallback heading insertion also failed:\", e2);\n      }\n    }\n    \n    updateFormattingState();\n  };\n\n  const insertImage = (alignment = 'left') => {\n    const url = prompt(\"Enter image URL:\");\n    if (url && url.trim()) {\n      if (!editorRef.current) return;\n      editorRef.current.focus();\n      const selection = window.getSelection();\n      if (selection.rangeCount > 0) {\n        const range = selection.getRangeAt(0);\n        const img = document.createElement(\"img\");\n        img.src = url.trim();\n        img.style.maxWidth = \"100%\";\n        img.style.height = \"auto\";\n        img.alt = \"Image\";\n        \n        // Wrap image in a div for alignment\n        const wrapper = document.createElement(\"div\");\n        wrapper.className = \"image-wrapper\";\n        wrapper.style.textAlign = alignment;\n        wrapper.style.margin = \"1em 0\";\n        wrapper.appendChild(img);\n        \n        range.insertNode(wrapper);\n        // Place cursor after image\n        const newRange = document.createRange();\n        newRange.setStartAfter(wrapper);\n        newRange.collapse(true);\n        selection.removeAllRanges();\n        selection.addRange(newRange);\n        handleInput();\n      } else {\n        // Fallback for execCommand\n        execCommand(\"insertImage\", url.trim());\n        // Try to find and wrap the inserted image\n        setTimeout(() => {\n          const images = editorRef.current.querySelectorAll('img');\n          if (images.length > 0) {\n            const lastImg = images[images.length - 1];\n            if (!lastImg.parentElement.classList.contains('image-wrapper')) {\n              const wrapper = document.createElement(\"div\");\n              wrapper.className = \"image-wrapper\";\n              wrapper.style.textAlign = alignment;\n              wrapper.style.margin = \"1em 0\";\n              lastImg.parentNode.insertBefore(wrapper, lastImg);\n              wrapper.appendChild(lastImg);\n              handleInput();\n            }\n          }\n        }, 100);\n      }\n    }\n  };\n\n  const alignImage = (alignment) => {\n    if (!editorRef.current) return;\n    editorRef.current.focus();\n    \n    const selection = window.getSelection();\n    if (selection.rangeCount === 0) return;\n    \n    const range = selection.getRangeAt(0);\n    let node = range.commonAncestorContainer;\n    \n    // Find the image element\n    let img = null;\n    if (node.nodeName === 'IMG') {\n      img = node;\n    } else if (node.nodeName === 'DIV' && node.querySelector('img')) {\n      img = node.querySelector('img');\n    } else {\n      // Walk up to find image\n      let current = node;\n      while (current && current !== editorRef.current) {\n        if (current.nodeName === 'IMG') {\n          img = current;\n          break;\n        }\n        if (current.querySelector && current.querySelector('img')) {\n          img = current.querySelector('img');\n          break;\n        }\n        current = current.parentElement;\n      }\n    }\n    \n    if (img) {\n      // Check if image is already wrapped\n      let wrapper = img.parentElement;\n      if (!wrapper.classList.contains('image-wrapper')) {\n        // Create wrapper\n        const newWrapper = document.createElement(\"div\");\n        newWrapper.className = \"image-wrapper\";\n        newWrapper.style.margin = \"1em 0\";\n        img.parentNode.insertBefore(newWrapper, img);\n        newWrapper.appendChild(img);\n        wrapper = newWrapper;\n      }\n      \n      // Apply alignment\n      wrapper.style.textAlign = alignment;\n      handleInput();\n    }\n  };\n\n  const handleImageUpload = (e, alignment = 'left') => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    \n    // Check if it's an image\n    if (!file.type.startsWith('image/')) {\n      alert('Please select an image file');\n      return;\n    }\n    \n    // Create a FileReader to convert image to data URL\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      if (!editorRef.current) return;\n      editorRef.current.focus();\n      const selection = window.getSelection();\n      let range = null;\n      \n      if (selection.rangeCount > 0) {\n        range = selection.getRangeAt(0);\n      } else {\n        range = document.createRange();\n        range.selectNodeContents(editorRef.current);\n        range.collapse(false);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n      \n      const img = document.createElement(\"img\");\n      img.src = reader.result;\n      img.style.maxWidth = \"100%\";\n      img.style.height = \"auto\";\n      img.alt = file.name || \"Uploaded image\";\n      \n      // Wrap image in a div for alignment\n      const wrapper = document.createElement(\"div\");\n      wrapper.className = \"image-wrapper\";\n      wrapper.style.textAlign = alignment;\n      wrapper.style.margin = \"1em 0\";\n      wrapper.appendChild(img);\n      \n      range.insertNode(wrapper);\n      \n      // Place cursor after image\n      const newRange = document.createRange();\n      newRange.setStartAfter(wrapper);\n      newRange.collapse(true);\n      selection.removeAllRanges();\n      selection.addRange(newRange);\n      handleInput();\n    };\n    \n    reader.onerror = () => {\n      alert('Error reading image file');\n    };\n    \n    reader.readAsDataURL(file);\n    \n    // Reset file input\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const triggerImageUpload = () => {\n    fileInputRef.current?.click();\n  };\n\n  const insertLink = () => {\n    if (!editorRef.current) return;\n    editorRef.current.focus();\n    const selection = window.getSelection();\n    const selectedText = selection.toString();\n    \n    if (selectedText) {\n      // Text is selected, make it a link\n      const url = prompt(\"Enter link URL:\", \"https://\");\n      if (url && url.trim()) {\n        execCommand(\"createLink\", url.trim());\n      }\n    } else {\n      // No text selected, ask for both text and URL\n      const linkText = prompt(\"Enter link text:\");\n      if (linkText && linkText.trim()) {\n        const url = prompt(\"Enter link URL:\", \"https://\");\n        if (url && url.trim()) {\n          // Insert link text and make it a link\n          const range = selection.rangeCount > 0 ? selection.getRangeAt(0) : null;\n          if (range) {\n            const link = document.createElement(\"a\");\n            link.href = url.trim();\n            link.textContent = linkText.trim();\n            link.target = \"_blank\";\n            link.rel = \"noopener noreferrer\";\n            range.insertNode(link);\n            // Place cursor after link\n            const newRange = document.createRange();\n            newRange.setStartAfter(link);\n            newRange.collapse(true);\n            selection.removeAllRanges();\n            selection.addRange(newRange);\n            handleInput();\n          }\n        }\n      }\n    }\n  };\n\n  const setTextColor = (color) => {\n    if (!editorRef.current) return;\n    editorRef.current.focus();\n    const selection = window.getSelection();\n    if (selection.rangeCount > 0 && selection.toString()) {\n      execCommand(\"foreColor\", color);\n    } else {\n      // Apply color to next typed text\n      execCommand(\"foreColor\", color);\n    }\n    setShowColorPicker(false);\n  };\n\n  const setFontSize = (size) => {\n    if (!editorRef.current) return;\n    editorRef.current.focus();\n    \n    // Map size to actual font size in pixels for normal text\n    const sizeMap = {\n      1: \"10px\",\n      2: \"12px\", \n      3: \"14px\",\n      4: \"16px\",\n      5: \"18px\",\n      6: \"20px\",\n      7: \"24px\",\n      8: \"28px\",\n      9: \"32px\",\n      10: \"36px\"\n    };\n    \n    const selection = window.getSelection();\n    if (selection.rangeCount > 0) {\n      const range = selection.getRangeAt(0);\n      const selectedText = selection.toString();\n      \n      if (selectedText) {\n        // Apply to selected text using CSS span\n        const span = document.createElement(\"span\");\n        span.style.fontSize = sizeMap[size] || \"16px\";\n        try {\n          range.surroundContents(span);\n        } catch (e) {\n          // If surroundContents fails, wrap manually\n          const textNode = document.createTextNode(selectedText);\n          span.appendChild(textNode);\n          range.deleteContents();\n          range.insertNode(span);\n        }\n        // Set cursor after span\n        const newRange = document.createRange();\n        newRange.setStartAfter(span);\n        newRange.collapse(true);\n        selection.removeAllRanges();\n        selection.addRange(newRange);\n        handleInput();\n      } else {\n        // No selection, apply to next typed text\n        // Use CSS font-size instead of deprecated fontSize command\n        const span = document.createElement(\"span\");\n        span.style.fontSize = sizeMap[size] || \"16px\";\n        span.innerHTML = '<br>';\n        range.insertNode(span);\n        const newRange = document.createRange();\n        newRange.setStart(span, 0);\n        newRange.collapse(true);\n        selection.removeAllRanges();\n        selection.addRange(newRange);\n        handleInput();\n      }\n    } else {\n      // Fallback\n      const range = document.createRange();\n      range.selectNodeContents(editorRef.current);\n      range.collapse(false);\n      const span = document.createElement(\"span\");\n      span.style.fontSize = sizeMap[size] || \"16px\";\n      span.innerHTML = '<br>';\n      range.insertNode(span);\n      const newRange = document.createRange();\n      newRange.setStart(span, 0);\n      newRange.collapse(true);\n      selection.removeAllRanges();\n      selection.addRange(newRange);\n      handleInput();\n    }\n    setShowFontSizeMenu(false);\n  };\n\n  const insertCode = () => {\n    if (!editorRef.current) return;\n    editorRef.current.focus();\n    const selection = window.getSelection();\n    \n    if (selection.rangeCount > 0) {\n      const range = selection.getRangeAt(0);\n      const selectedText = selection.toString();\n      \n      if (selectedText) {\n        // Wrap selected text in <code> tag for inline code\n        const code = document.createElement(\"code\");\n        code.textContent = selectedText;\n        range.deleteContents();\n        range.insertNode(code);\n        selection.removeAllRanges();\n        const newRange = document.createRange();\n        newRange.setStartAfter(code);\n        newRange.collapse(true);\n        selection.addRange(newRange);\n        handleInput();\n      } else {\n        // No selection, insert code block (pre)\n        execCommand(\"formatBlock\", \"pre\");\n      }\n    } else {\n      execCommand(\"formatBlock\", \"pre\");\n    }\n  };\n\n  const removeQuote = () => {\n    if (!editorRef.current) return;\n    \n    try {\n      editorRef.current.focus();\n      const selection = window.getSelection();\n      \n      if (selection.rangeCount > 0) {\n        const range = selection.getRangeAt(0);\n        let blockquote = null;\n        \n        // Check if selection is inside a blockquote\n        let node = range.commonAncestorContainer;\n        while (node && node !== editorRef.current) {\n          if (node.nodeType === Node.ELEMENT_NODE && node.tagName === 'BLOCKQUOTE') {\n            blockquote = node;\n            break;\n          }\n          node = node.parentNode;\n        }\n        \n        if (blockquote) {\n          // Convert blockquote to paragraph\n          const p = document.createElement('p');\n          p.innerHTML = blockquote.innerHTML;\n          \n          if (blockquote.parentNode) {\n            blockquote.parentNode.replaceChild(p, blockquote);\n          } else {\n            editorRef.current.replaceChild(p, blockquote);\n          }\n          \n          // Set cursor in the new paragraph\n          const newRange = document.createRange();\n          newRange.selectNodeContents(p);\n          newRange.collapse(false);\n          selection.removeAllRanges();\n          selection.addRange(newRange);\n          \n          handleInput();\n          return;\n        }\n      }\n      \n      // If no blockquote found in selection, remove all blockquotes from editor\n      const blockquotes = editorRef.current.querySelectorAll('blockquote');\n      blockquotes.forEach((bq) => {\n        const p = document.createElement('p');\n        p.innerHTML = bq.innerHTML;\n        if (bq.parentNode) {\n          bq.parentNode.replaceChild(p, bq);\n        }\n      });\n      \n      handleInput();\n    } catch (error) {\n      console.error(\"Remove quote failed:\", error);\n    }\n  };\n\n  const insertQuote = () => {\n    if (!editorRef.current) return;\n    editorRef.current.focus();\n    \n    const selection = window.getSelection();\n    let range = null;\n    \n    // Ensure we have a valid selection\n    if (selection.rangeCount === 0) {\n      const newRange = document.createRange();\n      newRange.selectNodeContents(editorRef.current);\n      newRange.collapse(false);\n      selection.removeAllRanges();\n      selection.addRange(newRange);\n    }\n    \n    range = selection.getRangeAt(0);\n    \n    // Ensure range is within editor\n    if (!editorRef.current.contains(range.commonAncestorContainer)) {\n      return;\n    }\n    \n    const selectedText = range.toString();\n    \n    try {\n      // Find the current block element\n      let blockElement = range.commonAncestorContainer;\n      if (blockElement.nodeType === 3) {\n        blockElement = blockElement.parentElement;\n      }\n      \n      // Walk up to find block-level element\n      while (blockElement && blockElement !== editorRef.current) {\n        const tagName = blockElement.tagName;\n        if (['H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'P', 'DIV', 'BLOCKQUOTE', 'PRE', 'LI'].includes(tagName)) {\n          break;\n        }\n        blockElement = blockElement.parentElement;\n      }\n      \n      if (selectedText) {\n        // Text is selected - wrap it in blockquote\n        const blockquote = document.createElement(\"blockquote\");\n        blockquote.className = \"quote-block\";\n        blockquote.innerHTML = `<p>${selectedText}</p>`;\n        range.deleteContents();\n        range.insertNode(blockquote);\n        \n        // Place cursor after blockquote\n        const newRange = document.createRange();\n        newRange.setStartAfter(blockquote);\n        newRange.collapse(true);\n        selection.removeAllRanges();\n        selection.addRange(newRange);\n        handleInput();\n      } else if (blockElement && blockElement !== editorRef.current && \n                 ['H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'P', 'DIV'].includes(blockElement.tagName)) {\n        // Replace current block with blockquote\n        const blockquote = document.createElement(\"blockquote\");\n        blockquote.className = \"quote-block\";\n        \n        let content = blockElement.innerHTML;\n        if (!content || content.trim() === '' || content === '<br>') {\n          content = '<p><br></p>';\n        } else {\n          // Wrap content in paragraph if not already\n          if (!content.startsWith('<p>')) {\n            content = `<p>${content}</p>`;\n          }\n        }\n        blockquote.innerHTML = content;\n        \n        // Replace the block element\n        if (blockElement.parentNode) {\n          blockElement.parentNode.replaceChild(blockquote, blockElement);\n        } else {\n          editorRef.current.replaceChild(blockquote, blockElement);\n        }\n        \n        // Set cursor in blockquote\n        const newRange = document.createRange();\n        const firstP = blockquote.querySelector('p');\n        if (firstP && firstP.firstChild) {\n          newRange.setStart(firstP.firstChild, firstP.firstChild.textContent?.length || 0);\n        } else {\n          newRange.selectNodeContents(blockquote);\n          newRange.collapse(false);\n        }\n        selection.removeAllRanges();\n        selection.addRange(newRange);\n        handleInput();\n      } else {\n        // Try formatBlock command first\n        const success = document.execCommand(\"formatBlock\", false, \"blockquote\");\n        \n        if (!success) {\n          // Fallback: create new blockquote element\n          const blockquote = document.createElement(\"blockquote\");\n          blockquote.className = \"quote-block\";\n          blockquote.innerHTML = '<p><br></p>';\n          \n          // Insert at cursor position\n          if (range.startContainer === editorRef.current || range.startContainer.parentElement === editorRef.current) {\n            range.insertNode(blockquote);\n          } else {\n            editorRef.current.appendChild(blockquote);\n          }\n          \n          // Set cursor in blockquote\n          const newRange = document.createRange();\n          const firstP = blockquote.querySelector('p');\n          if (firstP) {\n            newRange.setStart(firstP, 0);\n          } else {\n            newRange.setStart(blockquote, 0);\n          }\n          newRange.collapse(true);\n          selection.removeAllRanges();\n          selection.addRange(newRange);\n        } else {\n          // Add class to the created blockquote\n          const blockquotes = editorRef.current.querySelectorAll('blockquote');\n          if (blockquotes.length > 0) {\n            const lastBlockquote = blockquotes[blockquotes.length - 1];\n            lastBlockquote.className = \"quote-block\";\n          }\n        }\n        handleInput();\n      }\n    } catch (e) {\n      console.error(\"Quote insertion failed:\", e);\n      // Fallback\n      try {\n        const blockquote = document.createElement(\"blockquote\");\n        blockquote.className = \"quote-block\";\n        if (selectedText) {\n          blockquote.innerHTML = `<p>${selectedText}</p>`;\n          range.deleteContents();\n          range.insertNode(blockquote);\n        } else {\n          blockquote.innerHTML = '<p><br></p>';\n          range.insertNode(blockquote);\n        }\n        const newRange = document.createRange();\n        newRange.selectNodeContents(blockquote);\n        newRange.collapse(false);\n        selection.removeAllRanges();\n        selection.addRange(newRange);\n        handleInput();\n      } catch (e2) {\n        console.error(\"Fallback quote insertion also failed:\", e2);\n      }\n    }\n    \n    updateFormattingState();\n  };\n\n  const removeFormat = () => {\n    if (!editorRef.current) return;\n    editorRef.current.focus();\n    \n    const selection = window.getSelection();\n    if (selection.rangeCount > 0 && selection.toString()) {\n      // Remove formatting from selected text\n      execCommand(\"removeFormat\");\n      execCommand(\"unlink\"); // Also remove links\n    } else {\n      execCommand(\"removeFormat\");\n    }\n  };\n\n  const undo = () => {\n    if (!editorRef.current) return;\n    editorRef.current.focus();\n    try {\n      document.execCommand(\"undo\", false, null);\n      handleInput();\n    } catch (e) {\n      console.error(\"Undo failed:\", e);\n    }\n  };\n\n  const redo = () => {\n    if (!editorRef.current) return;\n    editorRef.current.focus();\n    try {\n      document.execCommand(\"redo\", false, null);\n      handleInput();\n    } catch (e) {\n      console.error(\"Redo failed:\", e);\n    }\n  };\n\n  const commonColors = [\n    \"#000000\", \"#333333\", \"#666666\", \"#999999\", \"#CCCCCC\", \"#FFFFFF\",\n    \"#FF0000\", \"#FF6600\", \"#FFCC00\", \"#33CC00\", \"#0066FF\", \"#6600FF\",\n    \"#FF0066\", \"#00CCCC\", \"#FF9900\", \"#99CC00\", \"#0099FF\", \"#9900FF\"\n  ];\n\n  return (\n    <div \n      ref={containerRef}\n      className=\"border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 flex flex-col overflow-hidden\"\n    >\n      {/* Toolbar - Sticky within container, below header */}\n      <div \n        ref={toolbarRef}\n        className=\"sticky top-0 z-10 flex items-center gap-1 p-2 border-b border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 flex-wrap shadow-sm rounded-t-lg flex-shrink-0\"\n      >\n        {/* Text Formatting */}\n        <button\n          type=\"button\"\n          onClick={() => execCommand(\"bold\")}\n          className={`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition ${\n            isBold ? \"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400\" : \"text-gray-700 dark:text-gray-300\"\n          }`}\n          title=\"Bold (Ctrl+B)\"\n        >\n          <Bold size={16} />\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => execCommand(\"italic\")}\n          className={`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition ${\n            isItalic ? \"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400\" : \"text-gray-700 dark:text-gray-300\"\n          }`}\n          title=\"Italic (Ctrl+I)\"\n        >\n          <Italic size={16} />\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => execCommand(\"underline\")}\n          className={`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition ${\n            isUnderline ? \"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400\" : \"text-gray-700 dark:text-gray-300\"\n          }`}\n          title=\"Underline (Ctrl+U)\"\n        >\n          <Underline size={16} />\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => execCommand(\"strikeThrough\")}\n          className={`p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition ${\n            isStrikethrough ? \"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400\" : \"text-gray-700 dark:text-gray-300\"\n          }`}\n          title=\"Strikethrough\"\n        >\n          <Strikethrough size={16} />\n        </button>\n        \n        <div className=\"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-1\" />\n        \n        {/* Headings H1-H6 */}\n        <button\n          type=\"button\"\n          onClick={() => insertHeading(1)}\n          className=\"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition\"\n          title=\"Heading 1\"\n        >\n          <Heading1 size={16} />\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => insertHeading(2)}\n          className=\"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition\"\n          title=\"Heading 2\"\n        >\n          <Heading2 size={16} />\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => insertHeading(3)}\n          className=\"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition\"\n          title=\"Heading 3\"\n        >\n          <Heading3 size={16} />\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => insertHeading(4)}\n          className=\"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition\"\n          title=\"Heading 4\"\n        >\n          <Heading4 size={16} />\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => insertHeading(5)}\n          className=\"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition\"\n          title=\"Heading 5\"\n        >\n          <Heading5 size={16} />\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => insertHeading(6)}\n          className=\"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition\"\n          title=\"Heading 6\"\n        >\n          <Heading6 size={16} />\n        </button>\n        \n        <div className=\"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-1\" />\n        \n        {/* Lists */}\n        <button\n          type=\"button\"\n          onClick={() => execCommand(\"insertUnorderedList\")}\n          className=\"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition\"\n          title=\"Bullet List\"\n        >\n          <List size={16} />\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => execCommand(\"insertOrderedList\")}\n          className=\"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition\"\n          title=\"Numbered List\"\n        >\n          <span className=\"text-xs font-bold\">1.</span>\n        </button>\n        \n        <div className=\"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-1\" />\n        \n        {/* Alignment - Works for both text and images */}\n        <button\n          type=\"button\"\n          onClick={() => {\n            if (!editorRef.current) return;\n            editorRef.current.focus();\n            const selection = window.getSelection();\n            if (selection.rangeCount > 0) {\n              const range = selection.getRangeAt(0);\n              let node = range.commonAncestorContainer;\n              // Check if an image is selected\n              if (node.nodeName === 'IMG' || (node.parentElement && node.parentElement.querySelector('img'))) {\n                alignImage('left');\n              } else {\n                execCommand(\"justifyLeft\");\n              }\n            }\n          }}\n          className=\"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition\"\n          title=\"Align Left (Text/Image)\"\n        >\n          <AlignLeft size={16} />\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => {\n            if (!editorRef.current) return;\n            editorRef.current.focus();\n            const selection = window.getSelection();\n            if (selection.rangeCount > 0) {\n              const range = selection.getRangeAt(0);\n              let node = range.commonAncestorContainer;\n              // Check if an image is selected\n              if (node.nodeName === 'IMG' || (node.parentElement && node.parentElement.querySelector('img'))) {\n                alignImage('center');\n              } else {\n                execCommand(\"justifyCenter\");\n              }\n            }\n          }}\n          className=\"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition\"\n          title=\"Align Center (Text/Image)\"\n        >\n          <AlignCenter size={16} />\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => {\n            if (!editorRef.current) return;\n            editorRef.current.focus();\n            const selection = window.getSelection();\n            if (selection.rangeCount > 0) {\n              const range = selection.getRangeAt(0);\n              let node = range.commonAncestorContainer;\n              // Check if an image is selected\n              if (node.nodeName === 'IMG' || (node.parentElement && node.parentElement.querySelector('img'))) {\n                alignImage('right');\n              } else {\n                execCommand(\"justifyRight\");\n              }\n            }\n          }}\n          className=\"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition\"\n          title=\"Align Right (Text/Image)\"\n        >\n          <AlignRight size={16} />\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => {\n            if (!editorRef.current) return;\n            editorRef.current.focus();\n            execCommand(\"justifyFull\");\n          }}\n          className=\"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition\"\n          title=\"Justify Text\"\n        >\n          <AlignJustify size={16} />\n        </button>\n        \n        <div className=\"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-1\" />\n        \n        {/* Text Color */}\n        <div className=\"relative color-picker-container\">\n          <button\n            type=\"button\"\n            onClick={(e) => {\n              e.stopPropagation();\n              setShowColorPicker(!showColorPicker);\n              setShowFontSizeMenu(false);\n            }}\n            className=\"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition\"\n            title=\"Text Color\"\n          >\n            <Palette size={16} />\n          </button>\n          {showColorPicker && (\n            <div \n              className=\"absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg shadow-xl p-2 z-50\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <div className=\"grid grid-cols-6 gap-1 mb-2\">\n                {commonColors.map((color) => (\n                  <button\n                    key={color}\n                    type=\"button\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      setTextColor(color);\n                    }}\n                    className=\"w-6 h-6 rounded border border-gray-300 dark:border-gray-600 hover:scale-110 transition-transform\"\n                    style={{ backgroundColor: color }}\n                    title={color}\n                  />\n                ))}\n              </div>\n              <input\n                type=\"color\"\n                onChange={(e) => {\n                  e.stopPropagation();\n                  setTextColor(e.target.value);\n                }}\n                className=\"w-full h-8 border border-gray-300 dark:border-gray-600 rounded cursor-pointer\"\n                title=\"Custom Color\"\n              />\n            </div>\n          )}\n        </div>\n        \n        {/* Font Size - Normal Text */}\n        <div className=\"relative font-size-container\">\n          <button\n            type=\"button\"\n            onClick={(e) => {\n              e.stopPropagation();\n              setShowFontSizeMenu(!showFontSizeMenu);\n              setShowColorPicker(false);\n            }}\n            className={`px-3 py-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition flex items-center gap-1.5 ${\n              showFontSizeMenu ? \"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400\" : \"text-gray-700 dark:text-gray-300\"\n            }`}\n            title=\"Select Text Size\"\n          >\n            <Type size={16} />\n            <span className=\"text-xs font-medium\">Size</span>\n          </button>\n          {showFontSizeMenu && (\n            <div \n              className=\"absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg shadow-xl p-2 z-50 min-w-[180px] max-h-[400px] overflow-y-auto\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <div className=\"text-xs font-semibold text-gray-500 dark:text-gray-400 px-3 py-2 mb-1 border-b border-gray-200 dark:border-gray-700\">\n                Select Text Size\n              </div>\n              <div className=\"space-y-1\">\n                {[\n                  { size: 1, label: \"10px\", desc: \"Extra Small\" },\n                  { size: 2, label: \"12px\", desc: \"Small\" },\n                  { size: 3, label: \"14px\", desc: \"Small\" },\n                  { size: 4, label: \"16px\", desc: \"Normal (Default)\" },\n                  { size: 5, label: \"18px\", desc: \"Medium\" },\n                  { size: 6, label: \"20px\", desc: \"Large\" },\n                  { size: 7, label: \"24px\", desc: \"Extra Large\" },\n                  { size: 8, label: \"28px\", desc: \"XX Large\" },\n                  { size: 9, label: \"32px\", desc: \"XXX Large\" },\n                  { size: 10, label: \"36px\", desc: \"Huge\" }\n                ].map((item) => (\n                  <button\n                    key={item.size}\n                    type=\"button\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      setFontSize(item.size);\n                    }}\n                    className=\"w-full text-left px-3 py-2 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded text-sm text-gray-700 dark:text-gray-300 flex items-center justify-between transition-colors\"\n                  >\n                    <span className=\"font-medium\">{item.label}</span>\n                    <span className=\"text-xs text-gray-400 dark:text-gray-500\">{item.desc}</span>\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n        \n        <div className=\"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-1\" />\n        \n        {/* Code & Quote */}\n        <button\n          type=\"button\"\n          onClick={insertCode}\n          className=\"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition\"\n          title=\"Code Block\"\n        >\n          <Code size={16} />\n        </button>\n        <button\n          type=\"button\"\n          onClick={insertQuote}\n          className=\"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition\"\n          title=\"Insert Blockquote\"\n        >\n          <Quote size={16} />\n        </button>\n        <button\n          type=\"button\"\n          onClick={removeQuote}\n          className=\"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition\"\n          title=\"Remove Blockquote\"\n        >\n          <Quote size={16} className=\"rotate-180 opacity-60\" />\n        </button>\n        \n        <div className=\"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-1\" />\n        \n        {/* Links & Images */}\n        <button\n          type=\"button\"\n          onClick={insertLink}\n          className=\"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition\"\n          title=\"Insert Link\"\n        >\n          <LinkIcon size={16} />\n        </button>\n        <button\n          type=\"button\"\n          onClick={triggerImageUpload}\n          className=\"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition\"\n          title=\"Upload Image\"\n        >\n          <Upload size={16} />\n        </button>\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          accept=\"image/*\"\n          onChange={(e) => handleImageUpload(e, 'left')}\n          className=\"hidden\"\n        />\n        \n      </div>\n\n      {/* Editor */}\n      <div\n        ref={editorRef}\n        contentEditable\n        onInput={handleInput}\n        onKeyDown={(e) => {\n          // Handle keyboard shortcuts\n          if (e.ctrlKey || e.metaKey) {\n            if (e.key === 'b') {\n              e.preventDefault();\n              execCommand(\"bold\");\n            } else if (e.key === 'i') {\n              e.preventDefault();\n              execCommand(\"italic\");\n            } else if (e.key === 'u') {\n              e.preventDefault();\n              execCommand(\"underline\");\n            } else if (e.key === 'z' && !e.shiftKey) {\n              e.preventDefault();\n              undo();\n            } else if ((e.key === 'y') || (e.key === 'z' && e.shiftKey)) {\n              e.preventDefault();\n              redo();\n            }\n          }\n        }}\n        className=\"min-h-[400px] flex-1 overflow-y-auto p-4 text-gray-900 dark:text-white focus:outline-none prose prose-lg max-w-none\"\n        style={{\n          wordBreak: \"break-word\",\n        }}\n        data-placeholder={placeholder}\n        suppressContentEditableWarning\n        onClick={(e) => {\n          // Only close if clicking directly on editor, not on toolbar\n          if (e.target === editorRef.current || editorRef.current.contains(e.target)) {\n            setShowColorPicker(false);\n            setShowFontSizeMenu(false);\n          }\n        }}\n      />\n      \n      <style dangerouslySetInnerHTML={{__html: `\n        [contenteditable][data-placeholder]:empty:before {\n          content: attr(data-placeholder);\n          color: #9ca3af;\n          pointer-events: none;\n        }\n        [contenteditable] h1 {\n          font-size: 2.5em !important;\n          font-weight: 700 !important;\n          margin: 0.8em 0 0.5em 0 !important;\n          line-height: 1.2 !important;\n          color: #111827 !important;\n          display: block !important;\n        }\n        [contenteditable] h2 {\n          font-size: 2em !important;\n          font-weight: 700 !important;\n          margin: 0.8em 0 0.5em 0 !important;\n          line-height: 1.3 !important;\n          color: #111827 !important;\n          display: block !important;\n        }\n        [contenteditable] h3 {\n          font-size: 1.75em !important;\n          font-weight: 700 !important;\n          margin: 0.8em 0 0.5em 0 !important;\n          line-height: 1.4 !important;\n          color: #111827 !important;\n          display: block !important;\n        }\n        [contenteditable] h4 {\n          font-size: 1.5em !important;\n          font-weight: 700 !important;\n          margin: 0.8em 0 0.5em 0 !important;\n          line-height: 1.4 !important;\n          color: #111827 !important;\n          display: block !important;\n        }\n        [contenteditable] h5 {\n          font-size: 1.25em !important;\n          font-weight: 700 !important;\n          margin: 0.8em 0 0.5em 0 !important;\n          line-height: 1.5 !important;\n          color: #111827 !important;\n          display: block !important;\n        }\n        [contenteditable] h6 {\n          font-size: 1.125em !important;\n          font-weight: 700 !important;\n          margin: 0.8em 0 0.5em 0 !important;\n          line-height: 1.5 !important;\n          color: #111827 !important;\n          display: block !important;\n        }\n        .dark [contenteditable] h1,\n        .dark [contenteditable] h2,\n        .dark [contenteditable] h3,\n        .dark [contenteditable] h4,\n        .dark [contenteditable] h5,\n        .dark [contenteditable] h6 {\n          color: #f9fafb !important;\n        }\n        [contenteditable] blockquote,\n        [contenteditable] .quote-block {\n          position: relative;\n          border-left: 4px solid #3b82f6;\n          padding: 1.5em 1.5em 1.5em 3em;\n          margin: 1.5em 0;\n          font-style: italic;\n          color: #4b5563;\n          background: linear-gradient(to right, #eff6ff 0%, #f0f9ff 100%);\n          border-radius: 0.5em;\n          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n        }\n        [contenteditable] blockquote::before,\n        [contenteditable] .quote-block::before {\n          content: '\"';\n          position: absolute;\n          left: 0.5em;\n          top: 0.3em;\n          font-size: 4em;\n          line-height: 1;\n          color: #3b82f6;\n          opacity: 0.3;\n          font-family: Georgia, serif;\n        }\n        [contenteditable] blockquote p,\n        [contenteditable] .quote-block p {\n          margin: 0;\n          padding: 0;\n          font-size: 1.1em;\n          line-height: 1.6;\n        }\n        .dark [contenteditable] blockquote,\n        .dark [contenteditable] .quote-block {\n          background: linear-gradient(to right, #1e3a5f 0%, #1e293b 100%);\n          color: #d1d5db;\n          border-left-color: #60a5fa;\n        }\n        .dark [contenteditable] blockquote::before,\n        .dark [contenteditable] .quote-block::before {\n          color: #60a5fa;\n        }\n        [contenteditable] pre {\n          background: #f3f4f6;\n          padding: 1em;\n          border-radius: 0.5em;\n          overflow-x: auto;\n          font-family: 'Courier New', monospace;\n          border: 1px solid #e5e7eb;\n        }\n        [contenteditable] code {\n          background: #f3f4f6;\n          padding: 0.2em 0.4em;\n          border-radius: 0.25em;\n          font-family: 'Courier New', monospace;\n          font-size: 0.9em;\n        }\n        [contenteditable] ul, [contenteditable] ol {\n          margin: 1em 0;\n          padding-left: 2em;\n        }\n        [contenteditable] ul {\n          list-style-type: disc;\n        }\n        [contenteditable] ol {\n          list-style-type: decimal;\n        }\n        [contenteditable] img {\n          max-width: 100%;\n          height: auto;\n          border-radius: 0.5em;\n          margin: 0.5em 0;\n          display: inline-block;\n        }\n        [contenteditable] .image-wrapper {\n          margin: 1em 0;\n          display: block;\n          width: 100%;\n        }\n        [contenteditable] .image-wrapper img {\n          margin: 0;\n        }\n        [contenteditable] .image-wrapper[style*=\"text-align: left\"] {\n          text-align: left;\n        }\n        [contenteditable] .image-wrapper[style*=\"text-align: center\"] {\n          text-align: center;\n        }\n        [contenteditable] .image-wrapper[style*=\"text-align: right\"] {\n          text-align: right;\n        }\n        [contenteditable] a {\n          color: #3b82f6;\n          text-decoration: underline;\n        }\n        [contenteditable] a:hover {\n          color: #2563eb;\n        }\n        [contenteditable] p {\n          margin: 0.5em 0;\n          line-height: 1.6;\n        }\n        [contenteditable] div[style*=\"text-align: center\"] {\n          text-align: center;\n        }\n        [contenteditable] div[style*=\"text-align: right\"] {\n          text-align: right;\n        }\n        [contenteditable] div[style*=\"text-align: justify\"] {\n          text-align: justify;\n        }\n      `}} />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1861, "column": 0}, "map": {"version":3,"sources":["file:///F:/NNBlog/my-app/app/admin/edit-post/%5Bid%5D/page.jsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useRouter, useParams } from \"next/navigation\";\nimport RichTextEditor from \"@/components/RichTextEditor\";\n\nexport default function EditPost() {\n  const router = useRouter();\n  const params = useParams();\n  const postId = params.id;\n  const [activeTab, setActiveTab] = useState(\"content\");\n  const [loadingPost, setLoadingPost] = useState(true);\n  const [formData, setFormData] = useState({\n    title: \"\",\n    excerpt: \"\",\n    category: \"\",\n    featuredImage: \"\",\n    status: \"draft\",\n    metaTitle: \"\",\n    metaDescription: \"\",\n    metaKeywords: \"\",\n    ogTitle: \"\",\n    ogDescription: \"\",\n    ogImage: \"\",\n  });\n  const [content, setContent] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  // Load post data on mount\n  useEffect(() => {\n    if (postId) {\n      fetchPost();\n    }\n  }, [postId]);\n\n  const fetchPost = async () => {\n    try {\n      setLoadingPost(true);\n      setError(\"\");\n      const response = await fetch(`/api/admin/posts/${postId}`);\n      \n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({ error: \"Failed to load post\" }));\n        setError(errorData.error || \"Failed to load post\");\n        setLoadingPost(false);\n        return;\n      }\n\n      const data = await response.json();\n      const post = data.post;\n\n      if (post) {\n        // Pre-fill form data\n        setFormData({\n          title: post.title || \"\",\n          excerpt: post.excerpt || \"\",\n          category: post.category || \"\",\n          featuredImage: post.featuredImage || \"\",\n          status: post.status || \"draft\",\n          metaTitle: post.seo?.metaTitle || \"\",\n          metaDescription: post.seo?.metaDescription || \"\",\n          metaKeywords: post.seo?.metaKeywords || \"\",\n          ogTitle: post.seo?.ogTitle || \"\",\n          ogDescription: post.seo?.ogDescription || \"\",\n          ogImage: post.seo?.ogImage || \"\",\n        });\n\n        // Load content - prefer HTML content from RichTextEditor, fallback to contentBlocks\n        if (post.content && post.content.trim() !== \"\") {\n          // Use HTML content directly\n          setContent(post.content);\n        } else if (post.contentBlocks && Array.isArray(post.contentBlocks) && post.contentBlocks.length > 0) {\n          // Convert old contentBlocks format to HTML (for backward compatibility)\n          // This is a simple conversion - in production you might want more sophisticated conversion\n          const htmlContent = post.contentBlocks\n            .map((block) => {\n              if (block.type === \"text\") {\n                let text = block.content || \"\";\n                if (block.bold) text = `<strong>${text}</strong>`;\n                if (block.italic) text = `<em>${text}</em>`;\n                if (block.underline) text = `<u>${text}</u>`;\n                if (block.color) text = `<span style=\"color: ${block.color}\">${text}</span>`;\n                return `<p>${text}</p>`;\n              }\n              if (block.type === \"heading\") {\n                const level = block.level || 2;\n                return `<h${level}>${block.content || \"\"}</h${level}>`;\n              }\n              if (block.type === \"quote\") {\n                return `<blockquote>${block.content || \"\"}</blockquote>`;\n              }\n              if (block.type === \"image\") {\n                return `<img src=\"${block.image || \"\"}\" alt=\"${block.alt || \"\"}\" style=\"max-width: 100%; height: auto;\" />`;\n              }\n              if (block.type === \"list\") {\n                const ListTag = block.ordered ? \"ol\" : \"ul\";\n                const items = (block.content || []).map((item) => {\n                  const itemText = typeof item === 'string' ? item : item?.text || \"\";\n                  let itemHtml = itemText;\n                  if (typeof item === 'object') {\n                    if (item.bold) itemHtml = `<strong>${itemHtml}</strong>`;\n                    if (item.italic) itemHtml = `<em>${itemHtml}</em>`;\n                    if (item.underline) itemHtml = `<u>${itemHtml}</u>`;\n                    if (item.color) itemHtml = `<span style=\"color: ${item.color}\">${itemHtml}</span>`;\n                  }\n                  return `<li>${itemHtml}</li>`;\n                }).join(\"\");\n                const heading = block.heading ? `<h3>${block.heading}</h3>` : \"\";\n                return `${heading}<${ListTag}>${items}</${ListTag}>`;\n              }\n              return \"\";\n            })\n            .join(\"\");\n          setContent(htmlContent);\n        } else {\n          setContent(\"\");\n        }\n      }\n    } catch (err) {\n      console.error(\"Error fetching post:\", err);\n      setError(\"Failed to load post. Please try again.\");\n    } finally {\n      setLoadingPost(false);\n    }\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value,\n    });\n  };\n\n  const handleImageUpload = async (e, fieldName) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      setFormData({\n        ...formData,\n        [fieldName]: reader.result,\n      });\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const handleSubmit = async (e, customData = null) => {\n    e.preventDefault();\n    setError(\"\");\n    setLoading(true);\n\n    try {\n      const dataToUse = customData || formData;\n\n      // Validate that there's at least some content\n      const textContent = content.replace(/<[^>]*>/g, \"\").trim();\n      if (!textContent) {\n        setError(\"Please add some content to your post\");\n        setLoading(false);\n        return;\n      }\n\n      const seoData = {\n        metaTitle: dataToUse.metaTitle || dataToUse.title,\n        metaDescription: dataToUse.metaDescription || dataToUse.excerpt,\n        metaKeywords: dataToUse.metaKeywords,\n        ogTitle: dataToUse.ogTitle || dataToUse.title,\n        ogDescription: dataToUse.ogDescription || dataToUse.excerpt,\n        ogImage: dataToUse.ogImage || dataToUse.featuredImage,\n        twitterCard: \"summary_large_image\",\n      };\n\n      const postData = {\n        title: dataToUse.title,\n        excerpt: dataToUse.excerpt,\n        content: content,\n        category: dataToUse.category,\n        featuredImage: dataToUse.featuredImage,\n        status: dataToUse.status,\n        contentBlocks: [{ type: \"text\", content: content }], // Store as single block for compatibility\n        seo: seoData,\n      };\n\n      const response = await fetch(`/api/admin/posts/${postId}`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(postData),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        const errorMessage = data.error || data.message || \"Failed to update post\";\n        const errorDetails = data.details || data.errorName || \"\";\n        setError(`${errorMessage}${errorDetails ? ` (${errorDetails})` : \"\"}`);\n        setLoading(false);\n        return;\n      }\n\n      // Success - redirect\n      router.push(\"/admin/posts\");\n      router.refresh();\n    } catch (err) {\n      console.error(\"Post update exception:\", err);\n      setError(`An error occurred: ${err.message || \"Please try again.\"}`);\n      setLoading(false);\n    }\n  };\n\n  const categories = [\n    \"startup\",\n    \"ecosystem\",\n    \"funding\",\n    \"technology\",\n    \"guides\",\n    \"tools\",\n    \"legal\",\n    \"marketing\",\n  ];\n\n  if (loadingPost) {\n    return (\n      <div className=\"max-w-5xl mx-auto p-6\">\n        <div className=\"text-center py-12\">\n          <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-red-500\"></div>\n          <p className=\"mt-4 text-gray-600 dark:text-gray-400\">Loading post...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-5xl mx-auto space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">Edit Post</h1>\n        <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\n          Update your blog post with SEO optimization\n        </p>\n      </div>\n\n      {error && (\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4\">\n          <p className=\"text-sm text-red-600 dark:text-red-400\">{error}</p>\n        </div>\n      )}\n\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\n        <div className=\"border-b border-gray-200 dark:border-gray-700\">\n          <nav className=\"flex space-x-8\">\n            <button\n              type=\"button\"\n              onClick={() => setActiveTab(\"content\")}\n              className={`py-4 px-1 border-b-2 font-medium text-sm ${\n                activeTab === \"content\"\n                  ? \"border-red-500 text-red-600 dark:text-red-400\"\n                  : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300\"\n              }`}\n            >\n              Content\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => setActiveTab(\"seo\")}\n              className={`py-4 px-1 border-b-2 font-medium text-sm ${\n                activeTab === \"seo\"\n                  ? \"border-red-500 text-red-600 dark:text-red-400\"\n                  : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300\"\n              }`}\n            >\n              SEO\n            </button>\n          </nav>\n        </div>\n\n        {activeTab === \"content\" && (\n          <div className=\"space-y-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Title <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                name=\"title\"\n                value={formData.title}\n                onChange={handleChange}\n                required\n                className=\"w-full rounded border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-500\"\n                placeholder=\"Enter post title\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Excerpt\n              </label>\n              <textarea\n                name=\"excerpt\"\n                value={formData.excerpt}\n                onChange={handleChange}\n                rows={3}\n                className=\"w-full rounded border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-500 resize-none\"\n                placeholder=\"Brief description of the post\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Category <span className=\"text-red-500\">*</span>\n              </label>\n              <select\n                name=\"category\"\n                value={formData.category}\n                onChange={handleChange}\n                required\n                className=\"w-full rounded border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-500\"\n              >\n                <option value=\"\">Select a category</option>\n                {categories.map((cat) => (\n                  <option key={cat} value={cat}>\n                    {cat.charAt(0).toUpperCase() + cat.slice(1)}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Featured Image\n              </label>\n              <input\n                type=\"url\"\n                name=\"featuredImage\"\n                value={formData.featuredImage}\n                onChange={handleChange}\n                className=\"w-full rounded border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-500 mb-2\"\n                placeholder=\"Image URL\"\n              />\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm text-gray-500 dark:text-gray-400\">OR</span>\n                <label className=\"flex-1\">\n                  <input\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={(e) => handleImageUpload(e, \"featuredImage\")}\n                    className=\"hidden\"\n                  />\n                  <span className=\"inline-block w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer text-sm text-center\">\n                    Upload Image\n                  </span>\n                </label>\n              </div>\n              {formData.featuredImage && (\n                <img\n                  src={formData.featuredImage}\n                  alt=\"Preview\"\n                  className=\"w-full max-w-md h-48 object-cover rounded-lg border border-gray-200 dark:border-gray-700 mt-2\"\n                  onError={(e) => {\n                    e.target.style.display = \"none\";\n                  }}\n                />\n              )}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Content <span className=\"text-red-500\">*</span>\n              </label>\n              <RichTextEditor\n                value={content}\n                onChange={setContent}\n                placeholder=\"Start writing your post... You can format text by selecting it and using the toolbar buttons above.\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Status\n              </label>\n              <select\n                name=\"status\"\n                value={formData.status}\n                onChange={handleChange}\n                className=\"w-full rounded border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-500\"\n              >\n                <option value=\"draft\">Draft</option>\n                <option value=\"published\">Published</option>\n              </select>\n            </div>\n          </div>\n        )}\n\n        {activeTab === \"seo\" && (\n          <div className=\"space-y-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Meta Title\n              </label>\n              <input\n                type=\"text\"\n                name=\"metaTitle\"\n                value={formData.metaTitle}\n                onChange={handleChange}\n                className=\"w-full rounded border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-500\"\n                placeholder=\"SEO title (defaults to post title)\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Meta Description\n              </label>\n              <textarea\n                name=\"metaDescription\"\n                value={formData.metaDescription}\n                onChange={handleChange}\n                rows={3}\n                className=\"w-full rounded border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-500 resize-none\"\n                placeholder=\"SEO description (defaults to excerpt)\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Meta Keywords\n              </label>\n              <input\n                type=\"text\"\n                name=\"metaKeywords\"\n                value={formData.metaKeywords}\n                onChange={handleChange}\n                className=\"w-full rounded border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-500\"\n                placeholder=\"Comma-separated keywords\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                OG Title\n              </label>\n              <input\n                type=\"text\"\n                name=\"ogTitle\"\n                value={formData.ogTitle}\n                onChange={handleChange}\n                className=\"w-full rounded border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-500\"\n                placeholder=\"Open Graph title (defaults to post title)\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                OG Description\n              </label>\n              <textarea\n                name=\"ogDescription\"\n                value={formData.ogDescription}\n                onChange={handleChange}\n                rows={3}\n                className=\"w-full rounded border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-500 resize-none\"\n                placeholder=\"Open Graph description (defaults to excerpt)\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                OG Image\n              </label>\n              <input\n                type=\"url\"\n                name=\"ogImage\"\n                value={formData.ogImage}\n                onChange={handleChange}\n                className=\"w-full rounded border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-500\"\n                placeholder=\"Open Graph image URL (defaults to featured image)\"\n              />\n            </div>\n          </div>\n        )}\n\n        <div className=\"flex items-center justify-end gap-4 pt-6 border-t border-gray-200 dark:border-gray-700\">\n          <button\n            type=\"button\"\n            onClick={() => router.back()}\n            className=\"px-6 py-3 rounded-xl border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 transition-all duration-200 font-medium\"\n          >\n            Cancel\n          </button>\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"bg-gradient-to-r from-red-500 to-red-600 text-white px-6 py-3 rounded-xl hover:from-red-600 hover:to-red-700 shadow-lg shadow-red-500/25 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            {loading ? \"Updating...\" : \"Update Post\"}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}